<?xml version="1.0"?>
<odoo>
	<record id="create_fraction_wizard_form" model="ir.ui.view">
		<field name="name">create.fraction.wizard.form</field>
		<field name="model">create.fraction.wizard</field>
		<field name="arch" type="xml">
			<form string="Create Fractions">
				<group>
					<group>
						<field name="action" widget="radio" options="{'horizontal': true}"/>
						<field name="create_individual_fractions" attrs="{'invisible':[('action','in',('update','close'))]}" />
						<field name="template_id" options="{'no_create_edit': True}" attrs="{'invisible':['|',('action','!=','create'),('create_individual_fractions', '!=', False)],'required':[('action','=','create'),('create_individual_fractions', '=', False)]}"/>
					</group>
					<group>
						<field name="main_product_id" readonly="1"/>
						<field name="worker_id" options="{'no_create_edit': True}" attrs="{'invisible':[('action','in',('update','close'))],'required':[('action', '=', 'create'),('create_individual_fractions', '!=', False)]}" />
						<field name="container_type_id" invisible="1"/>
						<label for="have_batteries" string='Batteries'/>
						<div class="o_row">
							<field name="have_batteries"/>
							<field name="batteries_weight" required="1" placeholder='Batteries Weight'/>
						</div>
					</group>
				</group>
				<!--<button name="update_form" string="update" type="object"/>-->
				<group attrs="{'invisible':[('action','in',('update','close'))]}">
					<field name="line_ids" nolabel="1">
						<tree editable="bottom">
							<field name="product_id" required="1" options="{'no_create_edit': True}"/>
							<field name="product_tmpl_id" invisible="1"/>
							<field name="fraction_weight"/>
							<field name="number_of_pieces"/>
							<!-- <field name="worker_id" options="{'no_create_edit': True}"/> -->
							<field name="recipient_container_id"
								   context="{'default_content_type_id': product_id,'default_container_type_id': container_type_id}" required="1"/>
							<field name="container_type_id" invisible="1"/>
						</tree>
					</field>
				</group>
				<group>
					<field name="fraction_ids" attrs="{'invisible':[('action','not in',('update','close'))]}" nolabel="1">
						<tree editable="bottom" create="0">
							<field name="fraction_id" required="1" options="{'no_create_edit': True}"/>
							<field name="product_id" required="1" options="{'no_create_edit': True}"/>
							<field name="product_tmpl_id" invisible="1"/>
							<field name="fraction_weight"/>
							<field name="number_of_pieces"/>
							<field name="recipient_container_id" required="1"/>
							<field name="worker_id" options="{'no_create_edit': True}"/>
							<field name="state"/>
						</tree>
					</field>
				</group>
				<footer>
					<button name="action_create_fraction" string="Create Fractions" type="object" class="btn btn-sm btn-primary" attrs="{'invisible':[('action','!=','create')]}"/>
					<button name="action_update_fractions" string="Update Fractions" type="object" class="btn btn-sm btn-primary" attrs="{'invisible':[('action','!=','update')]}"/>
					<button name="close_fractions" string="Close Fractions" type="object" style="float:right" class="btn btn-sm btn-primary" attrs="{'invisible':[('action','!=','close')]}"/>
					<button string="Cancel" class="btn btn-sm btn-default" special="cancel"/>
				</footer>
			</form>
		</field>
	</record>

	<record id="create_lead_from_dc_action" model="ir.actions.act_window">
		<field name="name">Create Fraction</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">create.fraction.wizard</field>
		<field name="view_mode">form</field>
		<field name="view_id" ref="create_fraction_wizard_form"/>
		<field name="target">new</field>
	</record>
</odoo>