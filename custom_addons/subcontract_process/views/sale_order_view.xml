<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="sale_order_form_inherit" model="ir.ui.view">
		<field name="name">sale.order.form</field>
		<field name="model">sale.order</field>
		<field name="inherit_id" ref="sale.view_order_form"/>
		<field name="arch" type="xml">
			<xpath expr="//button[@name='action_cancel']" position="after">
				<button name="%(action_update_so_order)d" type="action" class="oe_highlight" string="Update Price"
						attrs="{'invisible': ['|',('sub_contract','=',False),('state', 'not in', ('sale','done'))]}"/>
			</xpath>
			<xpath expr="//field[@name='validity_date']" position="before">
				<field name="sub_contract" attrs="{'readonly': [('state', 'in', ('sale','done'))]}"/>
			</xpath>

			<xpath expr="//page[last()]" position="after">
				<page string="Sub Contract Report" attrs="{'invisible': ['|',('sub_contract','=',False),('state', 'not in', ('sale','done'))]}">
					<field name="subcontract_fraction_ids">
						<tree editable="bottom">
							<field name="product_id" required="1"/>
							<field name="description"/>
							<field name="product_qty"/>
							<field name="product_uom"/>
							<field name="price_unit"/>
							<field name="taxes_id" widget="many2many_tags" options="{'no_create_edit': True}"/>
							<field name="price_subtotal"/>
						</tree>
					</field>
					<group class="oe_subtotal_footer oe_right">
						<field name="fractions_total" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
					</group>
				</page>
			</xpath>

		</field>
	</record>

	<!--<record id="view_order_form_container_inherited_subcontract" model="ir.ui.view">
		<field name="name">sale.order.customization</field>
		<field name="model">sale.order</field>
		<field name="inherit_id" ref="ppts_custom_sale.view_order_form_container_inherited"/>
		<field name="arch" type="xml">
			<xpath expr="//button[@name='send_notification']" position="attributes">
				<attribute name="attrs">
					{'invisible': ['|','|', ('state', 'not in', ['draft','sent']),('is_transport', '!=', False), ('sub_contract', '=', True)]}
				</attribute>
			</xpath>
		</field>
	</record>-->
</odoo>