<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<record id="subcontract_process_form_view" model="ir.ui.view">
		<field name="name">subcontract.process.form</field>
		<field name="model">subcontract.process</field>
		<field name="arch" type="xml">
			<form string="Sub Contract">
				<header>
					<button name="action_create_sale_order" type="object" class="oe_highlight" string="Create Sale Order"
							attrs="{'invisible': [('state', '!=', 'new')]}"/>
					<button name="action_cancel" type="object" class="oe_highlight" string="Cancel" attrs="{'invisible': [('state', 'in', ('done','cancel'))]}"/>
					<field name="state" widget="statusbar" statusbar_visible="new,processing,done"/>
				</header>
				<sheet>
					<div class="oe_button_box" name="button_box">
						<button name="open_sale_order" string="Sale Order" type="object" class="oe_stat_button" icon="fa-money" attrs="{'invisible': [('sale_order_id', '=', False)]}">
						</button>
						<button name="open_purchase_order" string="Purchase Order" type="object" class="oe_stat_button" icon="fa-credit-card" attrs="{'invisible': [('purchase_order_id', '=', False)]}">
						</button>
					</div>

					<div class="oe_title">
						<h1>
							<field name="name" readonly="1"/>
						</h1>
					</div>
					<group>
						<group>
							<field name="type" required="1" attrs="{'readonly': [('state', '!=','new')]}"/>
							<field name="partner_id" required="1" options="{'no_create_edit': True}" attrs="{'readonly': [('state', '!=','new')]}"/>
						</group>
						<group>
							<field name="company_id" required="1" style="pointer-events: none;"  attrs="{'readonly': [('state', '!=','new')]}"/>
							<field name="team_id" required="1" options="{'no_create_edit': True}" attrs="{'readonly': [('state', '!=','new')]}"/>
							<field name="sale_order_id" readonly="1" attrs="{'invisible': [('sale_order_id', '=', False)]}"/>
							<field name="purchase_order_id" readonly="1" attrs="{'invisible': [('purchase_order_id', '=', False)]}"/>
						</group>
					</group>
					<notebook>
						<page string="Containers">
							<field name="container_ids" context="{'group_by':'content_type_id'}" attrs="{'readonly': [('state', '!=','new')]}">
								<tree>
									<field name="name"/>
									<field name="content_type_id"/>
									<field name="net_weight"/>
									<field name="forecast_sale_price"/>
								</tree>
							</field>
							<group class="oe_subtotal_footer oe_right" name="rc_cost">
								<field name="container_count"/>
								<field name="net_weight"/>
								<field name="production_cost"/>
							</group>
							<div class="oe_clear"/>
						</page>
					</notebook>
				</sheet>
			</form>
		</field>
	</record>

	<record id="subcontract_process_tree_view" model="ir.ui.view">
		<field name="name">subcontract.process.tree</field>
		<field name="model">subcontract.process</field>
		<field name="arch" type="xml">
			<tree string="Sub Contract Tree">
				<field name="name"/>
				<field name="type"/>
				<field name="partner_id"/>
				<field name="sale_order_id"/>
				<field name="purchase_order_id"/>
				<field name="state"/>
			</tree>
		</field>
	</record>


	<record id="subcontract_process_act_window" model="ir.actions.act_window">
		<field name="name">Subcontract</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">subcontract.process</field>
		<field name="view_mode">tree,form</field>
	</record>

	<menuitem name="Subcontract" id="subcontract_menu" parent="ppts_project_entries.menu_project_custom" action="subcontract_process_act_window"
			  groups='ppts_inventory_customization.group_production_supervisor' sequence="4"/>

</odoo>